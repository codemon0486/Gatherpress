(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const t=window.wp.element,n=window.wp.i18n,r=window.wp.domReady;var a=e.n(r);const o=window.wp.components,l=window.wp.apiFetch;var s=e.n(l);function c(e){if("object"==typeof GatherPress)return e.split(".").reduce(((e,t)=>e&&e[t]),GatherPress)}window.wp.data;const i=()=>{const[r,a]=(0,t.useState)(!1),[l,i]=(0,t.useState)(!0),[u,d]=(0,t.useState)(!1),[m,h]=(0,t.useState)(!1),[p,g]=(0,t.useState)(!1),[w,_]=(0,t.useState)("");return(0,t.useEffect)((()=>{(u||m||p)&&i(!1),u&&m&&p&&(i(!0),d(!1),h(!1),g(!1))}),[l,u,m,p]),((e,t=!1)=>{for(const[n,r]of Object.entries(e)){let e=n;t&&(e+=t),addEventListener(e,(e=>{r(e.detail)}),!1)}})({setOpen:a}),(0,t.createElement)(t.Fragment,null,r&&(0,t.createElement)(o.Modal,{title:(0,n.__)("Email members","gatherpress"),onRequestClose:()=>a(!1),shouldCloseOnClickOutside:!1},(0,t.createElement)(o.TextareaControl,{label:(0,n.__)("Optional Message","gatherpress"),value:w,onChange:e=>_(e)}),(0,t.createElement)(o.Flex,null,(0,t.createElement)(o.FlexItem,null,(0,t.createElement)(o.CheckboxControl,{label:(0,n.__)("All","gatherpress"),checked:l,onChange:i})),(0,t.createElement)(o.FlexItem,null,(0,t.createElement)(o.CheckboxControl,{label:(0,n.__)("Attending","gatherpress"),checked:u,onChange:d})),(0,t.createElement)(o.FlexItem,null,(0,t.createElement)(o.CheckboxControl,{label:(0,n.__)("Waiting List","gatherpress"),checked:m,onChange:h})),(0,t.createElement)(o.FlexItem,null,(0,t.createElement)(o.CheckboxControl,{label:(0,n.__)("Not Attending","gatherpress"),checked:p,onChange:g}))),(0,t.createElement)("br",null),(0,t.createElement)(o.Button,{variant:"primary",onClick:()=>{e.g.confirm((0,n.__)("Ready to announce this event to all members?","gatherpress"))&&s()({path:"/gatherpress/v1/event/email/",method:"POST",data:{post_id:c("post_id"),message:w,send:{all:l,attending:u,waiting_list:m,not_attending:p},_wpnonce:c("nonce")}}).then((e=>{!function(e,t){if("object"!=typeof GatherPress)return;const n="event_announced".split("."),r=n.pop();n.reduce(((e,t)=>{var n;return null!==(n=e[t])&&void 0!==n?n:e[t]={}}),GatherPress)[r]=t}(0,e.success?"1":"0"),(void 0).setState({announceEventSent:e.success})}))}},(0,n.__)("Send Email","gatherpress"))))};a()((()=>{(0,t.createRoot)(document.getElementById("gp-event-communication-modal")).render((0,t.createElement)(i,null))}))})();