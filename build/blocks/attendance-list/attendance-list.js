(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,a=window.wp.domReady;var n=e.n(a);const s=window.wp.i18n,l=({item:e,additionalClasses:a,count:n,onTitleClick:s})=>{const{title:l,value:i}=e,r=0===n&&"attending"!==i?"hidden":"active";return(0,t.createElement)("div",{className:`gp-attendance-list__navigation-item gp-attendance-list__${r} ${a}`},(0,t.createElement)("a",{className:"gp-attendance-list__anchor","data-item":i,"data-toggle":"tab",href:"#",role:"tab","aria-controls":`#gp-attendance-${i}`,onClick:e=>s(e,i)},l),(0,t.createElement)("span",{className:"gp-attendance-list__count"},"(",n,")"))},i=(e,t=!1)=>{for(const[a,n]of Object.entries(e)){let e=a;t&&(e+=t),addEventListener(e,(e=>{n(e.detail)}),!1)}};function r(e){if("object"==typeof GatherPress)return e.split(".").reduce(((e,t)=>e&&e[t]),GatherPress)}window.wp.data;const c=({items:e,activeValue:a,onTitleClick:n})=>{const s={all:0,attending:0,not_attending:0,waiting_list:0};for(const[e,t]of Object.entries(r("attendees")))s[e]=t.count;const[c,d]=(0,t.useState)(s);i({setAttendanceCount:d},r("post_id"));const o=e.map(((e,s)=>{const i=e.value===a?"gp-attendance-list__current":"";return(0,t.createElement)(l,{key:s,item:e,count:c[e.value],additionalClasses:i,onTitleClick:n})}));return(0,t.createElement)("nav",{className:"gp-attendance-list__navigation"},o)},d=({eventId:e,value:a,limit:n,attendees:l=[],avatarOnly:c=!1})=>{const[d,o]=(0,t.useState)(l);i({setAttendanceList:o},e);let m="";return"object"==typeof d&&void 0!==d[a]&&(l=[...d[a].attendees],n&&(l=l.splice(0,n)),m=l.map(((e,a)=>{const{profile:n,name:s,photo:l,role:i}=e;let{guests:r}=e;return r=r?" +"+r+" guest(s)":"",(0,t.createElement)("div",{key:a,className:"gp-attendance-list__item"},(0,t.createElement)("figure",{className:"gp-attendance-list__member-avatar"},(0,t.createElement)("a",{href:n},(0,t.createElement)("img",{alt:s,title:s,src:l}))),!1===c&&(0,t.createElement)("div",{className:"gp-attendance-list__member-info"},(0,t.createElement)("div",{className:"gp-attendance-list__member-name"},(0,t.createElement)("a",{href:n},s)),(0,t.createElement)("div",{className:"gp-attendance-list__member-role"},i),(0,t.createElement)("small",{className:"gp-attendance-list__guests"},r)))}))),(0,t.createElement)(t.Fragment,null,"attending"===a&&0===m.length&&!1===c&&(0,t.createElement)("div",{className:"gp-attendance-list__no-attendees"},!1===r("has_event_past")?(0,s.__)("No one is attending this event yet.","gatherpress"):(0,s.__)("No one went to this event.","gatherpress")),m)},o=({items:e,activeValue:a,limit:n=!1})=>{const s=r("post_id"),l=r("attendees"),i=e.map(((e,i)=>{const{value:r}=e,c=r===a?"active":"hidden";return(0,t.createElement)("div",{key:i,className:`gp-attendance-list__items gp-attendance-list__${c}`,id:`gp-attendance-${r}`,role:"tabpanel","aria-labelledby":`gp-attendance-${r}-tab`},(0,t.createElement)(d,{eventId:s,value:r,limit:n,attendees:l}))}));return(0,t.createElement)("div",{className:"gp-attendance-list__content"},i)},m=()=>{let e="attending";const a=r("has_event_past"),n=r("current_user.status"),l=[{title:!1===a?(0,s.__)("Attending","gatherpress"):(0,s.__)("Went","gatherpress"),value:"attending"},{title:!1===a?(0,s.__)("Waiting List","gatherpress"):(0,s.__)("Wait Listed","gatherpress"),value:"waiting_list"},{title:!1===a?(0,s.__)("Not Attending","gatherpress"):(0,s.__)("Didn't Go","gatherpress"),value:"not_attending"}];e=void 0!==n&&"attend"!==n&&""!==n?n:e;const[d,m]=(0,t.useState)(e),[_,g]=(0,t.useState)(10);let p;return i({setAttendanceStatus:m},r("post_id")),p=!1===_?(0,s.__)("See less","gatherpress"):(0,s.__)("See more","gatherpress"),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"gp-attendance-list"},(0,t.createElement)(c,{items:l,activeValue:d,onTitleClick:(e,t)=>{e.preventDefault(),m(t)}}),(0,t.createElement)(o,{items:l,activeValue:d,limit:_})),(0,t.createElement)("div",{className:"has-text-align-right"},(0,t.createElement)("a",{href:"#",onClick:e=>(e=>{e.preventDefault(),g(!1===_&&10)})(e)},p)))};n()((()=>{const e=document.querySelectorAll('[data-gp_block_name="attendance-list"]');for(let a=0;a<e.length;a++)(0,t.createRoot)(e[a]).render((0,t.createElement)(m,null))}))})();