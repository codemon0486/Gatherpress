(()=>{"use strict";var e,t={9685:()=>{const e=window.wp.blocks,t=window.wp.element,a=window.wp.blockEditor,s=window.wp.i18n,n=window.React,r=e=>{let{item:a,additionalClasses:s,count:n,onTitleClick:r}=e;const{title:l,value:i}=a,c=0===n&&"attending"!==i?"hidden":"active";return(0,t.createElement)("div",{className:`wp-block-gatherpress-attendance-list__navigation-item wp-block-gatherpress-attendance-list__${c} ${s}`},(0,t.createElement)("a",{className:"wp-block-gatherpress-attendance-list__anchor","data-item":i,"data-toggle":"tab",href:"#",role:"tab","aria-controls":`#gp-attendance-${i}`,onClick:e=>r(e,i)},l),(0,t.createElement)("span",{className:"wp-block-gatherpress-attendance-list__count"},"(",n,")"))},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const[a,s]of Object.entries(e)){let e=a;t&&(e+=t),addEventListener(e,(e=>{s(e.detail)}),!1)}},i=e=>{let{items:a,activeValue:s,onTitleClick:i}=e;const c={all:0,attending:0,not_attending:0,waiting_list:0};if("object"==typeof GatherPress)for(const[e,t]of Object.entries(GatherPress.attendees))c[e]=t.count;const[o,p]=(0,n.useState)(c);l({setAttendanceCount:p},GatherPress.post_id);const d=a.map(((e,a)=>{const n=e.value===s?"wp-block-gatherpress-attendance-list__current":"";return(0,t.createElement)(r,{key:a,item:e,count:o[e.value],additionalClasses:n,onTitleClick:i})}));return(0,t.createElement)("nav",{className:"wp-block-gatherpress-attendance-list__navigation"},d)},c=e=>{let{eventId:a,value:n,limit:r,attendees:i=[],avatarOnly:c=!1}=e;const[o,p]=(0,t.useState)(i);l({setAttendanceList:p},a);let d="";return"object"==typeof o&&void 0!==o[n]&&(i=[...o[n].attendees],r&&(i=i.splice(0,r)),d=i.map(((e,a)=>{const{profile:s,name:n,photo:r,role:l}=e;let{guests:i}=e;return i=i?" +"+i+" guest(s)":"",(0,t.createElement)("div",{key:a,className:"wp-block-gatherpress-attendance-list__item"},(0,t.createElement)("figure",{className:"wp-block-gatherpress-attendance-list__member-avatar"},(0,t.createElement)("a",{href:s},(0,t.createElement)("img",{alt:n,title:n,src:r}))),!1===c&&(0,t.createElement)("div",{className:"wp-block-gatherpress-attendance-list__member-info"},(0,t.createElement)("div",{className:"wp-block-gatherpress-attendance-list__member-name"},(0,t.createElement)("a",{href:s},n)),(0,t.createElement)("div",{className:"wp-block-gatherpress-attendance-list__member-role"},l),(0,t.createElement)("small",{className:"wp-block-gatherpress-attendance-list__guests"},i)))}))),(0,t.createElement)(t.Fragment,null,"attending"===n&&0===d.length&&!1===c&&(0,t.createElement)("div",{className:"wp-block-gatherpress-attendance-list__no-attendees"},!1===GatherPress.has_event_past?(0,s.__)("No one is attending this event yet.","gatherpress"):(0,s.__)("No one went to this event.","gatherpress")),d)},o=e=>{let{items:a,activeValue:s,limit:n=!1}=e;const r=a.map(((e,a)=>{const{value:r}=e,l=r===s?"active":"hidden",i=GatherPress.post_id,o=GatherPress.attendees;return(0,t.createElement)("div",{key:a,className:`wp-block-gatherpress-attendance-list__items wp-block-gatherpress-attendance-list__${l}`,id:`gp-attendance-${r}`,role:"tabpanel","aria-labelledby":`gp-attendance-${r}-tab`},(0,t.createElement)(c,{eventId:i,value:r,limit:n,attendees:o}))}));return(0,t.createElement)("div",{className:"wp-block-gatherpress-attendance-list__content"},r)},p=()=>{let e="attending";const a=[{title:!1===GatherPress.has_event_past?(0,s.__)("Attending","gatherpress"):(0,s.__)("Went","gatherpress"),value:"attending"},{title:!1===GatherPress.has_event_past?(0,s.__)("Waiting List","gatherpress"):(0,s.__)("Wait Listed","gatherpress"),value:"waiting_list"},{title:!1===GatherPress.has_event_past?(0,s.__)("Not Attending","gatherpress"):(0,s.__)("Didn't Go","gatherpress"),value:"not_attending"}];"object"==typeof GatherPress&&(e=void 0!==GatherPress.current_user.status&&"attend"!==GatherPress.current_user.status?GatherPress.current_user.status:e);const[n,r]=(0,t.useState)(e),[c,p]=(0,t.useState)(10);let d;return l({setAttendanceStatus:r},GatherPress.post_id),d=!1===c?(0,s.__)("See less","gatherpress"):(0,s.__)("See more","gatherpress"),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wp-block-gatherpress-attendance-list__wrapper"},(0,t.createElement)(i,{items:a,activeValue:n,onTitleClick:(e,t)=>{e.preventDefault(),r(t)}}),(0,t.createElement)(o,{items:a,activeValue:n,limit:c})),(0,t.createElement)("div",{className:"has-text-align-right"},(0,t.createElement)("a",{href:"#",onClick:e=>(e=>{e.preventDefault(),p(!1===c&&10)})(e)},d)))},d=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"gatherpress/attendance-list","version":"0.1.1","title":"Attendance List","category":"gatherpress","icon":"groups","example":{},"description":"The block with attendance list.","attributes":{"blockId":{"type":"string"},"content":{"type":"string"},"color":{"type":"string"}},"supports":{"html":false},"textdomain":"gatherpress","editorScript":"file:./index.js","style":"file:./style-index.css","viewScript":"file:./attendance-list.js","render":"file:./render.php"}');(0,e.registerBlockType)(d,{edit:()=>{const e=(0,a.useBlockProps)();return(0,t.createElement)("div",e,(0,t.createElement)(p,null))},save:()=>null})}},a={};function s(e){var n=a[e];if(void 0!==n)return n.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,s),r.exports}s.m=t,e=[],s.O=(t,a,n,r)=>{if(!a){var l=1/0;for(p=0;p<e.length;p++){for(var[a,n,r]=e[p],i=!0,c=0;c<a.length;c++)(!1&r||l>=r)&&Object.keys(s.O).every((e=>s.O[e](a[c])))?a.splice(c--,1):(i=!1,r<l&&(l=r));if(i){e.splice(p--,1);var o=n();void 0!==o&&(t=o)}}return t}r=r||0;for(var p=e.length;p>0&&e[p-1][2]>r;p--)e[p]=e[p-1];e[p]=[a,n,r]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={746:0,145:0};s.O.j=t=>0===e[t];var t=(t,a)=>{var n,r,[l,i,c]=a,o=0;if(l.some((t=>0!==e[t]))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(c)var p=c(s)}for(t&&t(a);o<l.length;o++)r=l[o],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(p)},a=globalThis.webpackChunkgatherpress=globalThis.webpackChunkgatherpress||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=s.O(void 0,[145],(()=>s(9685)));n=s.O(n)})();