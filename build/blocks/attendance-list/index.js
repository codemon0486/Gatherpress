(()=>{"use strict";var e,t={5834:()=>{const e=window.wp.blocks,t=window.wp.element,a=window.wp.blockEditor,n=window.wp.i18n,s=({item:e,additionalClasses:a,count:n,onTitleClick:s})=>{const{title:i,value:r}=e,l=0===n&&"attending"!==r?"hidden":"active";return(0,t.createElement)("div",{className:`gp-attendance-list__navigation-item gp-attendance-list__${l} ${a}`},(0,t.createElement)("a",{className:"gp-attendance-list__anchor","data-item":r,"data-toggle":"tab",href:"#",role:"tab","aria-controls":`#gp-attendance-${r}`,onClick:e=>s(e,r)},i),(0,t.createElement)("span",{className:"gp-attendance-list__count"},"(",n,")"))},i=(e,t=!1)=>{for(const[a,n]of Object.entries(e)){let e=a;t&&(e+=t),addEventListener(e,(e=>{n(e.detail)}),!1)}};function r(e){if("object"==typeof GatherPress)return e.split(".").reduce(((e,t)=>e&&e[t]),GatherPress)}window.wp.data;const l=({items:e,activeValue:a,onTitleClick:n})=>{const l={all:0,attending:0,not_attending:0,waiting_list:0};for(const[e,t]of Object.entries(r("attendees")))l[e]=t.count;const[c,o]=(0,t.useState)(l);i({setAttendanceCount:o},r("post_id"));const d=e.map(((e,i)=>{const r=e.value===a?"gp-attendance-list__current":"";return(0,t.createElement)(s,{key:i,item:e,count:c[e.value],additionalClasses:r,onTitleClick:n})}));return(0,t.createElement)("nav",{className:"gp-attendance-list__navigation"},d)},c=({eventId:e,value:a,limit:s,attendees:l=[],avatarOnly:c=!1})=>{const[o,d]=(0,t.useState)(l);i({setAttendanceList:d},e);let p="";return"object"==typeof o&&void 0!==o[a]&&(l=[...o[a].attendees],s&&(l=l.splice(0,s)),p=l.map(((e,a)=>{const{profile:n,name:s,photo:i,role:r}=e;let{guests:l}=e;return l=l?" +"+l+" guest(s)":"",(0,t.createElement)("div",{key:a,className:"gp-attendance-list__item"},(0,t.createElement)("figure",{className:"gp-attendance-list__member-avatar"},(0,t.createElement)("a",{href:n},(0,t.createElement)("img",{alt:s,title:s,src:i}))),!1===c&&(0,t.createElement)("div",{className:"gp-attendance-list__member-info"},(0,t.createElement)("div",{className:"gp-attendance-list__member-name"},(0,t.createElement)("a",{href:n},s)),(0,t.createElement)("div",{className:"gp-attendance-list__member-role"},r),(0,t.createElement)("small",{className:"gp-attendance-list__guests"},l)))}))),(0,t.createElement)(t.Fragment,null,"attending"===a&&0===p.length&&!1===c&&(0,t.createElement)("div",{className:"gp-attendance-list__no-attendees"},!1===r("has_event_past")?(0,n.__)("No one is attending this event yet.","gatherpress"):(0,n.__)("No one went to this event.","gatherpress")),p)},o=({items:e,activeValue:a,limit:n=!1})=>{const s=r("post_id"),i=r("attendees"),l=e.map(((e,r)=>{const{value:l}=e,o=l===a?"active":"hidden";return(0,t.createElement)("div",{key:r,className:`gp-attendance-list__items gp-attendance-list__${o}`,id:`gp-attendance-${l}`,role:"tabpanel","aria-labelledby":`gp-attendance-${l}-tab`},(0,t.createElement)(c,{eventId:s,value:l,limit:n,attendees:i}))}));return(0,t.createElement)("div",{className:"gp-attendance-list__content"},l)},d=()=>{let e="attending";const a=r("has_event_past"),s=r("current_user.status"),c=[{title:!1===a?(0,n.__)("Attending","gatherpress"):(0,n.__)("Went","gatherpress"),value:"attending"},{title:!1===a?(0,n.__)("Waiting List","gatherpress"):(0,n.__)("Wait Listed","gatherpress"),value:"waiting_list"},{title:!1===a?(0,n.__)("Not Attending","gatherpress"):(0,n.__)("Didn't Go","gatherpress"),value:"not_attending"}];e=void 0!==s&&"attend"!==s&&""!==s?s:e;const[d,p]=(0,t.useState)(e),[m,g]=(0,t.useState)(10);let u;return i({setAttendanceStatus:p},r("post_id")),u=!1===m?(0,n.__)("See less","gatherpress"):(0,n.__)("See more","gatherpress"),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"gp-attendance-list"},(0,t.createElement)(l,{items:c,activeValue:d,onTitleClick:(e,t)=>{e.preventDefault(),p(t)}}),(0,t.createElement)(o,{items:c,activeValue:d,limit:m})),(0,t.createElement)("div",{className:"has-text-align-right"},(0,t.createElement)("a",{href:"#",onClick:e=>(e=>{e.preventDefault(),g(!1===m&&10)})(e)},u)))},p=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"gatherpress/attendance-list","version":"1.0.0","title":"Attendance List","category":"gatherpress","icon":"groups","example":{},"description":"The block with attendance list.","attributes":{"blockId":{"type":"string"},"content":{"type":"string"},"color":{"type":"string"}},"supports":{"html":false,"multiple":false},"textdomain":"gatherpress","editorScript":"file:./index.js","style":"file:./style-index.css","viewScript":"file:./attendance-list.js","render":"file:./render.php"}');(0,e.registerBlockType)(p,{edit:()=>{const e=(0,a.useBlockProps)();return(0,t.createElement)("div",e,(0,t.createElement)(d,null))},save:()=>null})}},a={};function n(e){var s=a[e];if(void 0!==s)return s.exports;var i=a[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,a,s,i)=>{if(!a){var r=1/0;for(d=0;d<e.length;d++){for(var[a,s,i]=e[d],l=!0,c=0;c<a.length;c++)(!1&i||r>=i)&&Object.keys(n.O).every((e=>n.O[e](a[c])))?a.splice(c--,1):(l=!1,i<r&&(r=i));if(l){e.splice(d--,1);var o=s();void 0!==o&&(t=o)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[a,s,i]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={746:0,145:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var s,i,[r,l,c]=a,o=0;if(r.some((t=>0!==e[t]))){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(c)var d=c(n)}for(t&&t(a);o<r.length;o++)i=r[o],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(d)},a=globalThis.webpackChunkgatherpress=globalThis.webpackChunkgatherpress||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var s=n.O(void 0,[145],(()=>n(5834)));s=n.O(s)})();