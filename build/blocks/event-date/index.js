(()=>{"use strict";var e,t={2610:(e,t,n)=>{const r=window.wp.blocks,a=window.wp.element,s=window.moment;var o=n.n(s);const i=window.wp.blockEditor,l=window.wp.components,m=window.wp.i18n,c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const[n,r]of Object.entries(e)){let e=n;t&&(e+=t);const a=new CustomEvent(e,{detail:r});dispatchEvent(a)}},d=window.wp.date,u=window.wp.data;function p(){(0,u.dispatch)("core/editor").editPost({meta:{_non_existing_meta:!0}})}function f(){const e="gp_event_past",t=(0,u.dispatch)("core/notices");t.removeNotice(e),function(){const e=o()(GatherPress.event_datetime.datetime_end);return o().tz(E).valueOf()>e.tz(E).valueOf()}()&&t.createNotice("warning",(0,m.__)("This event has already past.","gatherpress"),{id:e,isDismissible:!1})}window.wp.apiFetch;const h="YYYY-MM-DDTHH:mm:ss",v="MMMM D, YYYY h:mm a",E=(()=>{const e=GatherPress.event_datetime.timezone;return o().tz.zone(e)?e:"UTC"})(),g=(()=>{if("UTC"!==E)return"";const e=/(\+|-)([0-9]{1,2}):([0-9]{2})/.exec(GatherPress.event_datetime.timezone);return e&&4===e.length?String(e[1]+(parseInt(e[2],10)+parseInt(e[3],10)/60)):""})(),w=(o().tz(E).add(1,"day").set("hour",18).set("minute",0).set("second",0).format(h),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_(e),GatherPress.event_datetime.datetime_start=e,"function"==typeof t&&t(e),p()}),T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;D(e),GatherPress.event_datetime.datetime_end=e,null!==t&&t(e),p()};function _(e){const t=o().tz(GatherPress.event_datetime.datetime_end,E).valueOf(),n=o().tz(e,E).valueOf();if(n>=t){const e=o().tz(n,E).add(2,"hours").format(h);T(e)}}function D(e){const t=o().tz(GatherPress.event_datetime.datetime_start,E).valueOf(),n=o().tz(e,E).valueOf();if(n<=t){const e=o().tz(n,E).subtract(2,"hours").format(h);w(e)}}const x=e=>{const{dateTimeStart:t}=e;return o().tz(t,E).format(v)},b=e=>{const{dateTimeEnd:t}=e;return o().tz(t,E).format(v)},O=e=>{const{dateTimeStart:t,setDateTimeStart:n}=e,r=(0,d.getSettings)(),s=/a(?!\\)/i.test(r.formats.time.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""));return(0,a.createElement)(l.DateTimePicker,{currentDate:t,onChange:e=>w(e,n),is12Hour:s})},z=e=>{const{dateTimeEnd:t,setDateTimeEnd:n}=e,r=(0,d.getSettings)(),s=/a(?!\\)/i.test(r.formats.time.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""));return(0,a.createElement)(l.DateTimePicker,{currentDate:t,onChange:e=>T(e,n),is12Hour:s})},k=e=>{const{dateTimeStart:t,setDateTimeStart:n}=e;return(0,a.useEffect)((()=>{f(),c({setDateTimeStart:t})})),(0,a.createElement)(l.PanelRow,null,(0,a.createElement)(l.Flex,null,(0,a.createElement)(l.FlexItem,null,(0,m.__)("Start","gatherpress")),(0,a.createElement)(l.FlexItem,null,(0,a.createElement)(l.Dropdown,{position:"bottom left",renderToggle:e=>{let{isOpen:n,onToggle:r}=e;return(0,a.createElement)(l.Button,{onClick:r,"aria-expanded":n,isLink:!0},(0,a.createElement)(x,{dateTimeStart:t}))},renderContent:()=>(0,a.createElement)(O,{dateTimeStart:t,setDateTimeStart:n})}))))},S=e=>{const{dateTimeEnd:t,setDateTimeEnd:n}=e;return(0,a.useEffect)((()=>{f(),c({setDateTimeEnd:t})})),(0,a.createElement)(l.PanelRow,null,(0,a.createElement)(l.Flex,null,(0,a.createElement)(l.FlexItem,null,(0,m.__)("End","gatherpress")),(0,a.createElement)(l.FlexItem,null,(0,a.createElement)(l.Dropdown,{position:"bottom left",renderToggle:e=>{let{isOpen:n,onToggle:r}=e;return(0,a.createElement)(l.Button,{onClick:r,"aria-expanded":n,isLink:!0},(0,a.createElement)(b,{dateTimeEnd:t}))},renderContent:()=>(0,a.createElement)(z,{dateTimeEnd:t,setDateTimeEnd:n})}))))},P=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"gatherpress/event-date","version":"0.2","title":"Event Date","category":"gatherpress","icon":"clock","example":{},"description":"Display and edit event dates.","attributes":{"blockId":{"type":"string"}},"supports":{"html":false},"textdomain":"gatherpress","editorScript":"file:./index.js","style":"file:./style-index.css","render":"file:./render.php"}');(0,r.registerBlockType)(P,{edit:()=>{const e=(0,i.useBlockProps)(),[t,n]=(0,a.useState)(GatherPress.event_datetime.datetime_start),[r,s]=(0,a.useState)(GatherPress.event_datetime.datetime_end);return function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const[n,r]of Object.entries(e)){let e=n;t&&(e+=t),addEventListener(e,(e=>{r(e.detail)}),!1)}}({setDateTimeEnd:s,setDateTimeStart:n}),(0,a.createElement)("div",e,(0,a.createElement)(l.Flex,{justify:"normal",align:"flex-start",gap:"4"},(0,a.createElement)(l.FlexItem,{display:"flex",className:"gp-event-date__icon"},(0,a.createElement)(l.Icon,{icon:"clock"})),(0,a.createElement)(l.FlexItem,null,((e,t)=>{const n="dddd, MMMM D, YYYY",r="h:mm A",a=n+" "+r;let s=n+" "+r+" z";return o().tz(e,E).format(n)===o().tz(t,E).format(n)&&(s=r+" z"),o().tz(e,E).format(a)+" to "+o().tz(t,E).format(s)+g})(t,r)),(0,a.createElement)(i.InspectorControls,null,(0,a.createElement)(l.PanelBody,null,(0,a.createElement)("h3",null,(0,m.__)("Date & time","gatherpress")),(0,a.createElement)(k,{dateTimeStart:t,setDateTimeStart:n}),(0,a.createElement)(S,{dateTimeEnd:r,setDateTimeEnd:s})))))},save:()=>null})}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,r),s.exports}r.m=t,e=[],r.O=(t,n,a,s)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,a,s]=e[c],i=!0,l=0;l<n.length;l++)(!1&s||o>=s)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(i=!1,s<o&&(o=s));if(i){e.splice(c--,1);var m=a();void 0!==m&&(t=m)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,a,s]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={591:0,42:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,s,[o,i,l]=n,m=0;if(o.some((t=>0!==e[t]))){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(l)var c=l(r)}for(t&&t(n);m<o.length;m++)s=o[m],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(c)},n=globalThis.webpackChunkgatherpress=globalThis.webpackChunkgatherpress||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[42],(()=>r(2610)));a=r.O(a)})();