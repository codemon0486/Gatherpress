(()=>{"use strict";var e,t={6184:()=>{const e=window.wp.blocks,t=window.wp.element,s=window.wp.blockEditor,r=window.wp.i18n,n=(e,t=!1)=>{for(const[s,r]of Object.entries(e)){let e=s;t&&(e+=t),addEventListener(e,(e=>{r(e.detail)}),!1)}};function a(e){if("object"==typeof GatherPress)return e.split(".").reduce(((e,t)=>e&&e[t]),GatherPress)}window.wp.data;const i=({item:e,activeItem:s=!1,count:r,onTitleClick:n,rsvpLimit:i})=>{const{title:l,value:o}=e,p=0===r&&"attending"!==o?"hidden":"active",c=s?"span":"a",v=a("post_id");return s&&((e,t=!1)=>{for(const[s,r]of Object.entries(e)){let e=s;t&&(e+=t);const n=new CustomEvent(e,{detail:r});dispatchEvent(n)}})({setRsvpSeeAllLink:r>i?"active":"hidden"},v),(0,t.createElement)("div",{className:`gp-rsvp-response__navigation-item gp-rsvp-response__${p}`},(0,t.createElement)(c,{className:"gp-rsvp-response__anchor","data-item":o,"data-toggle":"tab",href:"#",role:"tab","aria-controls":`#gp-rsvp-${o}`,onClick:e=>n(e,o)},l),(0,t.createElement)("span",{className:"gp-rsvp-response__count"},"(",r,")"))},l=({items:e,activeValue:s,onTitleClick:r,rsvpLimit:l})=>{const o={all:0,attending:0,not_attending:0,waiting_list:0};for(const[e,t]of Object.entries(a("responses")))o[e]=t.count;const[p,c]=(0,t.useState)(o);n({setRsvpCount:c},a("post_id"));let v=0;const m=e.map(((e,n)=>{const a=e.value===s;return a&&(v=n),(0,t.createElement)(i,{key:n,item:e,count:p[e.value],activeItem:a,onTitleClick:r,rsvpLimit:l})}));return(0,t.createElement)("div",{className:"gp-rsvp-response__navigation-wrapper"},(0,t.createElement)("div",{className:"gp-rsvp-response__navigation-active"},e[v].title," (",p[s],")"),(0,t.createElement)("nav",{className:"gp-rsvp-response__navigation"},m))},o=({items:e,activeValue:s,onTitleClick:i,rsvpLimit:o,setRsvpLimit:p,defaultLimit:c})=>{let v;v=!1===o?(0,r.__)("See fewer","gatherpress"):(0,r.__)("See all","gatherpress");const[m,d]=(0,t.useState)("hidden");return n({setRsvpSeeAllLink:d},a("post_id")),(0,t.createElement)("div",{className:"gp-rsvp-response__header"},(0,t.createElement)("div",{className:"dashicons dashicons-groups"}),(0,t.createElement)(l,{items:e,activeValue:s,onTitleClick:i,rsvpLimit:o}),(0,t.createElement)("div",{className:`gp-rsvp-response__see-all gp-rsvp-response__see-all--${m}`},(0,t.createElement)("a",{href:"#",onClick:e=>(e=>{e.preventDefault(),p(!1===o&&c)})(e)},v)))},p=({eventId:e,value:s,limit:i,responses:l=[],avatarOnly:o=!1})=>{const[p,c]=(0,t.useState)(l);n({setRsvpResponse:c},e);let v="";return"object"==typeof p&&void 0!==p[s]&&(l=[...p[s].responses],i&&(l=l.splice(0,i)),v=l.map(((e,s)=>{const{profile:r,name:n,photo:a,role:i}=e;let{guests:l}=e;return l=l?" +"+l+" guest(s)":"",(0,t.createElement)("div",{key:s,className:"gp-rsvp-response__item"},(0,t.createElement)("figure",{className:"gp-rsvp-response__member-avatar"},(0,t.createElement)("a",{href:r},(0,t.createElement)("img",{alt:n,title:n,src:a}))),!1===o&&(0,t.createElement)("div",{className:"gp-rsvp-response__member-info"},(0,t.createElement)("div",{className:"gp-rsvp-response__member-name"},(0,t.createElement)("a",{href:r},n)),(0,t.createElement)("div",{className:"gp-rsvp-response__member-role"},i),(0,t.createElement)("small",{className:"gp-rsvp-response__guests"},l)))}))),(0,t.createElement)(t.Fragment,null,"attending"===s&&0===v.length&&!1===o&&(0,t.createElement)("div",{className:"gp-rsvp-response__no-responses"},!1===a("has_event_past")?(0,r.__)("No one is attending this event yet.","gatherpress"):(0,r.__)("No one went to this event.","gatherpress")),v)},c=({items:e,activeValue:s,limit:r=!1})=>{const n=a("post_id"),i=a("responses"),l=e.map(((e,a)=>{const{value:l}=e,o=l===s?"active":"hidden";return(0,t.createElement)("div",{key:a,className:`gp-rsvp-response__items gp-rsvp-response__${o}`,id:`gp-rsvp-${l}`,role:"tabpanel","aria-labelledby":`gp-rsvp-${l}-tab`},(0,t.createElement)(p,{eventId:n,value:l,limit:r,responses:i}))}));return(0,t.createElement)("div",{className:"gp-rsvp-response__content"},l)},v=()=>{let e="attending";const s=a("has_event_past"),i=a("current_user.status"),l=[{title:!1===s?(0,r.__)("Attending","gatherpress"):(0,r.__)("Went","gatherpress"),value:"attending"},{title:!1===s?(0,r.__)("Waiting List","gatherpress"):(0,r.__)("Wait Listed","gatherpress"),value:"waiting_list"},{title:!1===s?(0,r.__)("Not Attending","gatherpress"):(0,r.__)("Didn't Go","gatherpress"),value:"not_attending"}];e=void 0!==i&&"attend"!==i&&""!==i?i:e;const[p,v]=(0,t.useState)(e),[m,d]=(0,t.useState)(8);return n({setRsvpStatus:v},a("post_id")),(0,t.createElement)("div",{className:"gp-rsvp-response"},(0,t.createElement)(o,{items:l,activeValue:p,onTitleClick:(e,t)=>{e.preventDefault(),v(t)},rsvpLimit:m,setRsvpLimit:d,defaultLimit:8}),(0,t.createElement)(c,{items:l,activeValue:p,limit:m}))},m=e=>{const{isSelected:s}=e,r=s?"none":"block";return(0,t.createElement)("div",{style:{position:"relative"}},e.children,(0,t.createElement)("div",{style:{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",display:r}}))},d=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"gatherpress/rsvp-response","version":"1.0.0","title":"RSVP Response","category":"gatherpress","icon":"groups","example":{},"description":"The block with RSVP response.","attributes":{"blockId":{"type":"string"},"content":{"type":"string"},"color":{"type":"string"}},"supports":{"html":false},"textdomain":"gatherpress","editorScript":"file:./index.js","style":"file:./style-index.css","viewScript":"file:./rsvp-response.js","render":"file:./render.php"}');(0,e.registerBlockType)(d,{edit:()=>{const e=(0,s.useBlockProps)();return(0,t.createElement)("div",e,(0,t.createElement)(m,null,(0,t.createElement)(v,null)))},save:()=>null})}},s={};function r(e){var n=s[e];if(void 0!==n)return n.exports;var a=s[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,s,n,a)=>{if(!s){var i=1/0;for(c=0;c<e.length;c++){for(var[s,n,a]=e[c],l=!0,o=0;o<s.length;o++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](s[o])))?s.splice(o--,1):(l=!1,a<i&&(i=a));if(l){e.splice(c--,1);var p=n();void 0!==p&&(t=p)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[s,n,a]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={304:0,952:0};r.O.j=t=>0===e[t];var t=(t,s)=>{var n,a,[i,l,o]=s,p=0;if(i.some((t=>0!==e[t]))){for(n in l)r.o(l,n)&&(r.m[n]=l[n]);if(o)var c=o(r)}for(t&&t(s);p<i.length;p++)a=i[p],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},s=globalThis.webpackChunkgatherpress=globalThis.webpackChunkgatherpress||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var n=r.O(void 0,[952],(()=>r(6184)));n=r.O(n)})();