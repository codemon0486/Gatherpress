(()=>{"use strict";const e=window.wp.element,t=window.lodash,n=window.wp.components,o=window.wp.i18n,a=window.wp.coreData,s=window.wp.data,l=l=>{var r,i;const{name:d,option:u,value:p,fieldOptions:m}=l.attrs,[c,g]=(0,e.useState)(null!==(r=JSON.parse(p))&&void 0!==r?r:"[]"),{contentList:w}=(0,s.useSelect)((e=>{const{getEntityRecords:t}=e(a.store);return{contentList:t("user"!==m.type?"postType":"root",m.type||"post",{per_page:-1,context:"view"})}}),[c]),v=null!==(i=w?.reduce(((e,t)=>({...e,[t.title?.rendered||t.name]:t})),{}))&&void 0!==i?i:{};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.FormTokenField,{key:u,label:m.label||(0,o.__)("Select Posts","gatherpress"),name:d,value:c&&c.map((e=>({id:e.id,slug:e.slug,value:e.title?.rendered||e.name||e.value}))),suggestions:Object.keys(v),onChange:e=>{if(e.some((e=>"string"==typeof e&&!v[e])))return;const n=e.map((e=>"string"==typeof e?v[e]:e));if((0,t.includes)(n,null))return!1;g(n)},maxSuggestions:m.max_suggestions||20,maxLength:m.limit||0}),(0,e.createElement)("input",{type:"hidden",id:u,name:d,value:c&&JSON.stringify(c.map((e=>({id:e.id,slug:e.slug,value:e.title?.rendered||e.name||e.value}))))}))},r=document.querySelectorAll('[data - gp_component_name = "autocomplete"]');for(let t=0;t<r.length;t++){const n=JSON.parse(r[t].dataset.gp_component_attrs);(0,e.render)((0,e.createElement)(l,{attrs:n}),r[t])}})();